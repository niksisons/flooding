# Геопортал для мониторинга затоплений

Веб-платформа на Django для анализа и визуализации данных о затоплениях с использованием космических снимков и цифровых моделей рельефа.

## Описание проекта

Геопортал предоставляет интерактивный интерфейс для:
- Загрузки и обработки космических снимков
- Сравнения снимков с базовым слоем (DEM-файлы)
- Создания маски затопления и визуализации ее на карте
- Анализа статистики затопленных территорий

## Функциональные возможности

### Для всех пользователей:
- Просмотр интерактивной карты с зонами затопления
- Просмотр данных об исторических событиях затопления
- Регистрация и авторизация

### Для зарегистрированных пользователей:
- Загрузка космических снимков и DEM-файлов
- Создание анализов затопления
- Просмотр результатов анализа на карте
- Загрузка статистики затопления

### Для администраторов:
- Управление пользователями и их правами
- Создание и редактирование базовых слоев
- Обработка космических снимков
- Управление всеми анализами затопления

## Технологии

- **Бэкенд:** Django, GeoDjango, Django REST Framework
- **Пространственная база данных:** PostgreSQL + PostGIS
- **Обработка геоданных:** GDAL, Rasterio, Geopandas, Pysheds
- **Фронтенд:** Leaflet.js для интерактивной карты, HTML/CSS/JS

## Установка и запуск

### Предварительные требования

- Python 3.8 или выше
- PostgreSQL с расширением PostGIS
- GDAL и библиотеки для работы с геоданными
- Virtualenv (рекомендуется)

### Установка на Linux/MacOS

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/floodportal.git
cd floodportal
```

2. Создайте виртуальное окружение и активируйте его:
```
python -m venv venv
source venv/bin/activate  # В Windows: venv\Scripts\activate
```

3. Установите зависимости:
```
pip install -r requirements.txt
```

4. Создайте файл `.env` с настройками подключения к базе данных:
```
DEBUG=True
SECRET_KEY=your-secret-key
DATABASE_URL=postgis://user:password@localhost:5432/floodportal
```

5. Примените миграции и создайте суперпользователя По:
```
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser

```

6. Запустите сервер разработки:
```
python manage.py runserver
```

7. Откройте сайт по адресу http://127.0.0.1:8000/

### Установка с использованием Docker (альтернативный вариант)

1. Установите Docker и docker-compose

2. Запустите сборку и контейнеры:
```
docker-compose up -d
```

3. Примените миграции и создайте суперпользователя:
```
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py createsuperuser
```

4. Откройте сайт по адресу http://localhost:8000/

## Использование геопортала

### Загрузка данных

1. Зарегистрируйтесь в системе через страницу регистрации.
2. Войдите в свой аккаунт.
3. Перейдите на страницу "Загрузка данных".
4. Загрузите DEM-файл (цифровую модель рельефа) в формате GeoTIFF.
5. Загрузите космический снимок в формате GeoTIFF или другом поддерживаемом формате.

### Создание анализа затопления

1. Перейдите на страницу "Анализ затопления".
2. Выберите загруженный DEM-файл и космический снимок.
3. Нажмите "Создать анализ".
4. После создания анализа нажмите "Запустить обработку".
5. Дождитесь завершения обработки (статус изменится на "Завершено").

### Просмотр результатов

1. После завершения анализа перейдите на страницу "Мои анализы".
2. Выберите нужный анализ из списка.
3. На странице анализа вы увидите:
   - Информацию о затоплении
   - Маску затопления
   - Интерактивную карту с векторным слоем затопления
   - Статистику (площадь затопления и др.)

## Структура проекта

- `floodportal/` - основной пакет проекта Django
- `flooddata/` - приложение для работы с данными затопления
- `templates/` - HTML-шаблоны
- `static/` - статические файлы (CSS, JavaScript, изображения)
- `media/` - медиа-файлы (загружаемые пользователями)

## Лицензия

Проект распространяется под лицензией MIT.

## Авторы

- Ваше имя и контакты

## Вклад в проект

Предложения и вклад в проект приветствуются. Пожалуйста, создавайте issue или pull request.